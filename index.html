<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux Mint WASM</title>

    <script src="coi-serviceworker.js"></script>

    <style>
        /* Стилі для чорного екрана */
        body { 
            background: #111; 
            color: #0f0; 
            font-family: monospace; 
            margin: 0; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            height: 100vh; 
        }
        #screen_container { 
            border: 3px solid #333; 
            background: #000; 
            min-width: 640px; 
            min-height: 400px; 
        }
        canvas { display: block; }
        .info { margin-top: 10px; color: #666; font-size: 12px; }
    </style>
</head>
<body>

    <div id="screen_container">
        <div id="loading_text" style="padding: 20px;">Ініціалізація системи...</div>
        <canvas></canvas>
    </div>

    <div class="info">Якщо бачите помилку CSP — спробуйте браузер Firefox</div>

    <script src="libv86.js"></script>

    <script>
        window.onload = function() {
            if (typeof V86Starter === "undefined") {
                document.getElementById("loading_text").innerHTML = "<span style='color:red'>Помилка: libv86.js не завантажено</span>";
                return;
            }

            const emulator = new V86Starter({
                wasm_path: "v86.wasm",
                memory_size: 256 * 1024 * 1024,
                vga_fps: 30,
                screen_container: document.getElementById("screen_container"),
                bios: { url: "seabios.bin" },
                vga_bios: { url: "vgabios.bin" },
                cdrom: { url: "linux.iso" },
                autostart: true,
            });

            emulator.add_listener("emulator-ready", function() {
                document.getElementById("loading_text").style.display = "none";
            });
        };
    </script>
</body>
</html>
